%
% Copyright © 2012 Peeter Joot.  All Rights Reserved.
% Licenced as described in the file LICENSE under the root directory of this GIT repository.
%

%
%
\chapter{Equations of motion given mass variation with spacetime position}
\label{chap:massVaryLagrangian}
%\date{August 28, 2008}        % Deleting this command produces today's date.

\section{}

Let
\begin{equation}\label{eqn:massVaryLagrangian:20}
\begin{aligned}
x &= \sum \gamma_{\mu} {x}^{\mu} \\
v &= \frac{dx}{d\tau} = \sum \gamma_{\mu} \xdot^{\mu}
\end{aligned}
\end{equation}

Where whatever spacetime basis you pick has a corresponding reciprocal frame defined implicitly by:

\begin{equation*}
\gamma^{\mu} \cdot \gamma_{\nu} = {\delta^{\mu}}_{\nu}
\end{equation*}

You could for example pick these so that these are orthonormal with:

\begin{equation}\label{eqn:massVaryLagrangian:40}
\begin{aligned}
\gamma_{i}^2 &= \gamma_i \cdot \gamma_i = -1 \\
\gamma^{i} &= -\gamma_{i} \\
\gamma^{0} &= \gamma_{0} \\
\gamma_{0}^2 &= 1 \\
\gamma_{i} \cdot \gamma_0 &= 0
\end{aligned}
\end{equation}

ie: the frame vectors define the metric tensor implicitly:

\begin{equation}\label{eqn:massvary:minkowski}
g_{\mu\nu} = \gamma_{\mu} \cdot \gamma_{\nu} =
\begin{bmatrix}
1 & 0 & 0 & 0 \\
0 & -1 & 0 & 0 \\
0 & 0 & -1 & 0 \\
0 & 0 & 0 & -1 \\
\end{bmatrix}
\end{equation}

Now, my assumption is that given a Lagrangian of the form:

\begin{equation}
\LL = \inv{2} m v^2 + \phi
\end{equation}

That the equations of motion follow by computation of:

\begin{equation}
\PD{x^{\mu}}{\LL} = \frac{d}{d\tau} \PD{\xdot^{\mu}}{\LL}
\end{equation}

I do not have any proof of this (I do not yet know any calculus of variations, and this is a guess based on intuition).  It does however work out to get the covariant form of the Lorentz force law, so I think it is right.

To get the EOM we need the squared proper velocity.  This is just \(c^2\).  Example: for an orthonormal spacetime frame one has:

\begin{equation}\label{eqn:massVaryLagrangian:60}
\begin{aligned}
v^2 &=
\left(\gamma^0 c dt/d\tau + \sum \gamma_i dx/d\tau\right)^2  \\
&= \gamma \left(\gamma_0 c + \sum \gamma_i dx/dt\right)^2 \\
&= \gamma^2 \left(c^2 - \Bv^2\right) = c^2
\end{aligned}
\end{equation}

but if we leave this expressed in terms of coordinates (also do not have to assume the diagonal metric tensor, since we can use non-orthonormal basis vectors if desired) we have:

\begin{equation}\label{eqn:massVaryLagrangian:80}
\begin{aligned}
v^2
&= \left(\sum \gamma_{\mu} \xdot^{\mu}\right) \cdot \left(\sum \gamma_{\nu} \xdot^{\nu}\right) \\
&= \sum \gamma_{\mu} \cdot \gamma_{\nu} \xdot^{\mu} \xdot^{\nu} \\
&= \sum g_{\mu\nu} \xdot^{\mu} \xdot^{\nu}
\end{aligned}
\end{equation}

Therefore the Lagrangian to minimize is:

\begin{equation}
\LL = \inv{2} m \sum g_{\mu\nu} \xdot^{\mu} \xdot^{\nu} + \phi.
\end{equation}

Performing the calculations for the EOM, and in this case, also allowing mass to be a function of space or time position (\(m = m(x^{\mu})\))

\begin{equation}\label{eqn:massVaryLagrangian:100}
\begin{aligned}
\PD{x^{\mu}}{\LL} &= \frac{d}{d\tau} \PD{\xdot^{\mu}}{\LL} \\
\PD{x^{\mu}}{\phi} + \inv{2} \PD{x^{\mu}}{m} \sum g_{\alpha\beta} \xdot^{\alpha} \xdot^{\beta} &= \\
\PD{x^{\mu}}{\phi} + \inv{2} \PD{x^{\mu}}{m} v^2 &= \\
%\PD{x^{\mu}}{\phi} + \inv{2} \PD{x^{\mu}}{m} c^2 &= \\
&= \inv{2} \frac{d}{d\tau} m \sum g_{\alpha\beta} \PD{x^{\mu}}{}\left(\xdot^{\alpha} \xdot^{\beta}\right) \\
&= \inv{2} \frac{d}{d\tau} m \sum g_{\alpha\beta} \left(\delta^{\mu\alpha} \xdot^{\beta} + \xdot^{\alpha} \delta^{\mu\beta}\right) \\
&= \frac{d}{d\tau} m \sum g_{\alpha\mu} \xdot^{\alpha} \\
&= \sum \PD{x^{\beta}}{m} \xdot^{\beta} g_{\alpha\mu} \xdot^{\alpha} + m g_{\alpha\mu} \xddot^{\alpha} \\
\end{aligned}
\end{equation}

Now, the metric tensor values can be removed by summing since they can be used to switch upper and lower indices of the frame vectors:

\begin{equation}\label{eqn:massVaryLagrangian:120}
\begin{aligned}
\gamma_{\mu} &= \sum a^{\nu} \gamma^{\nu} \\
\gamma_{\mu} \cdot \gamma_{\beta}
&= \sum a^{\nu} \gamma^{\nu} \cdot \gamma_{\beta} \\
&= \sum a^{\nu} {\delta^{\nu}}_{\beta} \\
&= a^{\beta} \\
\implies \\
\gamma_{\mu}
&= \sum \gamma_{\mu} \cdot \gamma_{\nu} \gamma^{\nu} \\
&= \sum g_{\mu\nu} \gamma^{\nu} \\
\end{aligned}
\end{equation}

If you are already familiar with tensors then this may be obvious to you (but was not to me with only vector background).

Multiplying throughout by \(\gamma^{\mu}\), and summing over \(\mu\) one has:

\begin{equation}\label{eqn:massVaryLagrangian:140}
\begin{aligned}
\sum \gamma^{\mu} \left( \PD{x^{\mu}}{\phi} + \inv{2} \PD{x^{\mu}}{m} v^2 \right)
&= \sum \gamma^{\mu} \left(\PD{x^{\beta}}{m} \xdot^{\beta} g_{\alpha\mu} \xdot^{\alpha} + m g_{\alpha\mu} \xddot^{\alpha} \right) \\
+ \left(\sum \gamma^{\mu} \PD{x^{\mu}}{}\right) \phi + \inv{2} v^2 \left(\sum \gamma^{\mu} \PD{x^{\mu}}{}\right) m &= \\
&= \sum \PD{x^{\beta}}{m} \xdot^{\beta} \gamma^{\mu} \gamma_{\alpha} \cdot \gamma_{\mu} \xdot^{\alpha} + m \gamma^{\mu} \gamma_{\alpha} \cdot \gamma_{\mu} \xddot^{\alpha}  \\
&= \sum \PD{x^{\beta}}{m} \xdot^{\beta} \gamma_{\alpha} \xdot^{\alpha} + m \gamma_{\alpha} \xddot^{\alpha}  \\
\end{aligned}
\end{equation}

Writing:
\begin{equation*}
\nabla = \sum \gamma^{\mu} \frac{\partial}{\partial x^{\mu}}
\end{equation*}

This is:
\begin{equation*}
\grad \phi + \inv{2} v^2 \grad m = v \sum \PD{x^{\beta}}{m} \xdot^{\beta} + m \vdot
\end{equation*}

However,
\begin{equation}\label{eqn:massVaryLagrangian:160}
\begin{aligned}
(\grad m) \cdot v
&=
\left(\sum \gamma^{\mu} \PD{x^{\mu}}{m}\right) \cdot \left( \sum \gamma_{\nu} \xdot^{\nu} \right) \\
&= \sum \gamma^{\mu} \cdot \gamma_{\nu} \PD{x^{\mu}}{m} \xdot^{\nu} \\
&= \sum {\delta^{\mu}}_{\nu} \PD{x^{\mu}}{m} \xdot^{\nu} \\
&= \sum \PD{x^{\mu}}{m} \xdot^{\mu} = \frac{dm}{d\tau}
\end{aligned}
\end{equation}

That allows for expressing the EOM in strict vector form:
\begin{equation}
\grad \phi + \inv{2} v^2 \grad m = v \grad m \cdot v + m \vdot.
\end{equation}

However, there is still an asymmetry here, as one would expect a \(\mdot v\) term.  Regrouping slightly, and using some algebraic vector
manipulation we have:

\begin{equation}\label{eqn:massVaryLagrangian:180}
\begin{aligned}
m \vdot + v \grad m \cdot v - \inv{2} v^2 \grad m &= \grad \phi \\
m \vdot + \inv{2} v (
\mathLabelBox
[
   labelstyle={xshift=2cm},
   linestyle={out=270,in=90, latex-}
]
{2 \grad m \cdot v - v \grad m}{\(2 a \cdot b - b a = a b\)}) &= \\
m \vdot + \inv{2} v (\grad m) v &= \\
m \vdot + \inv{2} (v \grad m) v &= \\
m \vdot + \inv{2} (2 v \cdot \grad m - \grad m v) v &= \\
m \vdot + (v \cdot \grad m) v - \inv{2} (\grad m v) v &= \\
m \vdot + \mdot v - \inv{2} \grad m (v v) &= \\
\implies \\
\frac{d (m v)}{d\tau} = m \vdot + \mdot v
&= \inv{2} \grad m c^2 +\grad \phi \\
&= \grad \left(\phi - \inv{2} m c^2 \right) \\
&= \grad \left(\phi - \inv{2} m v^2 \right) \\
\end{aligned}
\end{equation}

So, after a whole wack of algebra, the end result is to show the proper time variant of the Lagrangian equations imply that our
proper force can be expressed as a (spacetime) gradient.

The caveat is that if the mass is allowed to vary, it also needs to be
included in the generalized potential associated with the equation of motion.

\subsection{Summarizing}

We took this Lagrangian with kinetic energy and non-velocity dependent potential terms, where the
mass in the kinetic energy term is allowed to vary with position or time.  That plus the
presumed proper-time Lagrange equations:

\begin{equation}\label{eqn:massVaryLagrangian:200}
\begin{aligned}
\LL &= \inv{2} m v^2 + \phi \\
\PD{x^{\mu}}{\LL} &= \frac{d}{d\tau} \PD{\xdot^{\mu}}{\LL},
\end{aligned}
\end{equation}

when followed to their algebraic conclusion together imply that the equation of motion is:

\begin{equation}\label{eqn:massvary:eom}
\frac{d (m v)}{d\tau} = \grad \LL,
\end{equation}

\section{Examine spatial components for comparison with Newtonian limit}

Now, in the original version of this document, the signs for all the \(\phi\) terms were inverted.  This was changed since we want agreement with the Newtonian limit, and there is an implied sign change hiding in the above equations.

Consider, the constant mass case, where the Lagrangian is specified in terms of spatial quantities:

\begin{equation*}
\LL = \inv{2} m v^2 + \phi = \inv{2} m \gamma^2 ( c^2 - \Bv^2 ) = \inv{2} m \gamma^2 c^2 - \gamma^2\left( \inv{2} m \Bv^2 - \phi \right)
\end{equation*}

For \(\abs{\Bv} << c\), \(\gamma \approx 1\), so we have a constant term in the Lagrangian of \(\inv{2} m c^2\) which will not change the
EOM and can be removed.  The remainder is our normal kinetic minus potential Lagrangian (the sign inversion on the entire remaining Lagrangian also will not change the EOM result).

Suppose one picks an orthonormal
spacetime frame as given in the example metric tensor of \eqnref{eqn:massvary:minkowski}.  To select our spatial quantities
we wedge with \(\gamma_0\).

For the left hand side of our equation of motion \eqnref{eqn:massvary:eom} we have:

\begin{equation}\label{eqn:massVaryLagrangian:220}
\begin{aligned}
\frac{d (m v)}{d\tau} \wedge \gamma_0
&= \frac{ d (m v) \wedge \gamma_0 }{dt} \frac{dt}{d\tau} \\
&= \frac{ d p \wedge \gamma_0 }{dt} \frac{dt}{d\tau} \\
&= \frac{dt}{d\tau} \frac{ d }{dt} m (c \gamma_0 + \sum \gamma_i \xdot^i ) \wedge \gamma_0 \\
&= \frac{dt}{d\tau} \frac{ d }{dt} m \sum (\gamma_i \wedge \gamma_0) \xdot^i  \\
&= \frac{dt}{d\tau} \frac{ d }{dt} m \sum \sigma_i \xdot^i  \\
&= \frac{dt}{d\tau} \frac{ d }{dt} (m \Bv \gamma) \\
&= \gamma \frac{ d (\gamma \Bp) }{dt}
\end{aligned}
\end{equation}

Now, looking at the right hand side of the EOM we have (again for the constant mass case where we expect agreement with our familiar Newtonian EOM):

\begin{equation}\label{eqn:massVaryLagrangian:240}
\begin{aligned}
\grad \left(\phi - \inv{2} m v^2 \right) \wedge \gamma_0
&= (\grad \phi) \wedge \gamma_0 \\
&= \sum \gamma^{\mu} \wedge \gamma_0 \PD{x^{\mu}}{\phi} \\
&= \sum \gamma^{i} \wedge \gamma_0 \PD{x^{i}}{\phi} \\
&= -\sum \gamma_{i} \wedge \gamma_0 \PD{x^{i}}{\phi} \\
&= -\sum \sigma_i \PD{x^{i}}{\phi} \\
&= - \spacegrad \phi
\end{aligned}
\end{equation}

Therefore in the limit \(\abs{\Bv} << c\) we have our agreement with the Newtonian EOM:

\begin{equation}
\gamma \frac{ d (\gamma \Bp) }{dt} = - \spacegrad \phi \approx \frac{d\Bp}{dt}
\end{equation}
